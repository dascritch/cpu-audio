<!DOCTYPE html>
<html>
<meta charset="UTF-8" />
<title>CPU-Audio API example : insert annotations</title>

<script>
// In this example, we will create custom time annotations in the player

// First, we'll wait the web-component have created its UI

document.addEventListener('CPU_ready', ({target}) => {
    // Let's get the <cpu-audio> API
    let player_API = target.CPU;

    // OK,  let's create our plane 
    player_API.addPlane(
        'downloadables',    // named reference
        'Download',       // Title for the panel
        {
            track   : false,        // Do not show on the timeline
            panel   : true,         // Create a panel
    });

    index = 0;
    for (downloadable of Array.from(target.querySelectorAll('[data-downloadable]'))) {
        // Now, we can insert some points of interest
        player_API.addPoint(
            'downloadables',              // named reference for the plane
            `entry-${ index++ }`,         // named reference for the point
            {  
                text    : downloadable.dataset.downloadable,  // get the text
                link    : downloadable.src         // its source as URL
            });
    }
});

</script>
<script src="../build/cpu-audio.js" async></script>

<body>
    <cpu-audio title="Ex0157 Web, State of the art 2021" canonical="https://cpu.dascritch.net/post/2021/03/11/Ex0157-Web%2C-State-of-the-art-2021" poster="/public/Images/Emissions/.1902-Ex0103-WebStateOfTheArt_s.png" waveform="https://cpu.dascritch.net/public/Sonores/Emissions/waveforms/0157-CPU%2811-03-21%29.png">
        <audio controls="controls" id="emission-0157">
            <!-- This source is not downloadable -->
            <source src="https://cpu.dascritch.net/public/Sonores/Emissions/hls/0157-CPU%2811-03-21%29/index.m3u8" type="application/x-mpegurl" /> 
            <!-- OGG Vorbis version, this high-quality audio is also served for broadcast purposes -->
            <source src="https://cpu.dascritch.net/public/Sonores/Emissions/0157-CPU%2811-03-21%29.ogg" type="audio/ogg; codecs=vorbis" data-downloadable="OGG Vorbis, 68,146 Mb" />
            <!-- MP3 version, the legacy and universal usable version -->
            <source src="https://cpu.dascritch.net/public/Sonores/Emissions/podcast/0157-CPU%2811-03-21%29.mp3" type="audio/mpeg" data-downloadable=".mp3, 39,644 Mb" />

            <!-- Chapters indication -->
            <track kind="chapters" src="https://cpu.dascritch.net/public/Sonores/Emissions/tracks/0157-CPU%2811-03-21%29.vtt" default>
            
        </audio>
    </cpu-audio>
</body>
</html>