(()=>{"use strict";
/** @license
Cpu-Audio: an extension to the hash system to address timecode into audio/video elements and a player WebComponent
Version 6.7pre
Copyright (C) 2014-2021 Xavier "dascritch" Mouton-Dubosc & contributors.
License GNU GPL 3

- project mini-site https://dascritch.github.io/cpu-audio/
- project repository : https://github.com/dascritch/cpu-audio
- use case : http://cpu.pm
- blog post : https://dascritch.net/post/2018/11/06/Reconstruire-son-lecteur-audio-pour-le-web
**/
const e="CPU-AUDIO",t="CPU-CONTROLLER",a="#interface",i="audio[controls]",n="cpu-audio audio",o={passive:!0},r={passive:!0,once:!0};function l(e,t,a=document){Array.from(a.querySelectorAll(e)).forEach(t)}function s(){return void 0!==window.customElements}function d(e){let t=document.createElement("a");return t.href="string"!=typeof e?e:e.split("#")[0],t.href}function c(){return!window.matchMedia("screen").matches}function u(e){d(window.location.href)===d(e.target.href)&&e.preventDefault()}function p(e){e.addEventListener("click",u)}function h(e){let t=document.createElement("span");t.innerText=e;let a=t.innerHTML;return t.remove(),a}function _(e){return e.closest(a)}function g(a){if([e,t].includes(a.tagName))return a.CPU;let i=a.closest(e);return i?i.CPU:_(a).parentNode.host.CPU}function m(t){window.console.warn(`${e}: `,t)}function f(t){window.console.error(`${e}: `,t)}const v={fr:{loading:"Chargement en cours…",pause:"Pause",play:"Lecture",canonical:"Lien vers la fiche du sonore",moment:"Lien vers ce moment",untitled:"(sans titre)",cover:"pochette",more:"Actions",share:"Partager",twitter:"Partager sur Twitter",facebook:"Partager sur Facebook",e_mail:"Partager par e-mail",download:"Télécharger",back:"Annuler",chapters:"Chapitres",playlist:"Playlist",media_err_aborted:"Vous avez annulé la lecture.",media_err_network:"Une erreur réseau a causé l'interruption du téléchargement.",media_err_decode:"La lecture du sonore a été annulée suite à des problèmes de corruption ou de fonctionnalités non supportés par votre navigateur.",media_err_src_not_supported:"Le sonore n'a pu être chargé, soit à cause de sourcis sur le serveur, le réseau ou parce que le format n'est pas supporté.",media_err_unknow:"Erreur due à une raison inconnue."},en:{loading:"Loading…",pause:"Pause",play:"Play",canonical:"Link to the sound's page",moment:"Link to this time",untitled:"(untitled)",cover:"cover",more:"Actions",share:"Share",twitter:"Share on Twitter",facebook:"Share on Facebook",e_mail:"Share via e-mail",download:"Download",back:"Back",chapters:"Chapters",playlist:"Playlist",media_err_aborted:"You have aborted the play.",media_err_network:"A network error broke the download.",media_err_decode:"Play was canceled due to file corruption or a not supported function in your browser.",media_err_src_not_supported:"The media cannot be downloaded due to server problems, network problems or unsupported by your browser.",media_err_unknow:"Error of unknown cause."}};let b=document.querySelector("html").lang;if(!b.length||!(b.toLowerCase()in v)){b="en";let e=window.navigator.languages;e=void 0!==e?e:[navigator.language||navigator.browserLanguage];let t=!1;for(let a of e)if(a.split){let e=a.split("-")[0];!t&&e in v&&(b=e)}}const w=v[b],y={get title(){for(const e of["og","twitter"]){const t=document.querySelector(`meta[property="${e}:title"]`);if(t)return t.content}const e=document.title;return""===e?null:e},get poster(){for(const e of['property="og:image"','name="twitter:image:src"']){const t=document.querySelector(`meta[${e}]`);if(t)return t.content}return null},get canonical(){const e=document.querySelector('link[rel="canonical"]');return e?e.href:location.href.split("#")[0]},get twitter(){const e=document.querySelector('meta[name="twitter:creator"]');return e&&e.content.length>1?e.content:null},playlist:null,waveform:null,duration:null,download:null},k={d:86400,h:3600,m:60,s:1};let x=[1,60,3600,86400];const C=/^\d+$/,E=/\D*/g,L=function(e){let t=0;return""!==e&&(t=C.test(e)?Number(e):e.includes(":")?T.ColonTimeInSeconds(e):T.SubunitTimeInSeconds(e)),t},P=function(e){if(e===1/0)return"?";let t="",a=!1;for(let i in k)if(k.hasOwnProperty(i)){let n=k[i];if(e>=n||a){a=!0;let o=Math.floor(e/n);t+=o+i,e-=o*n}}return""===t?"0s":t},U=function(e){if(e===1/0)return"?";let t="",a=!1;for(let i in k)if(k.hasOwnProperty(i)){let n=k[i];if(e>=n||a){a=!0;let i=Math.floor(e/n);t+=""===t?"":":",t+=(i<10&&""!==t?"0":"")+i,e-=i*n}}return 1===t.length?`0:0${t}`:2===t.length?`0:${t}`:""===t?"0:00":t},$=function(e){return`P${T.SecondsInTime(e).toUpperCase()}`},T={TimeInSeconds:L,SubunitTimeInSeconds:function(e){let t,a=0;for(let i in k)k.hasOwnProperty(i)&&e.includes(i)&&([t,e]=e.split(i),a+=Number(t.replace(E,""))*k[i]);return a},ColonTimeInSeconds:function(e){let t=0,a=e.split(":");for(let e=0;e<a.length;e++)t+=Number(a[e])*x[a.length-1-e];return t},SecondsInTime:P,SecondsInColonTime:U,SecondsInPaddledColonTime:function(e){if(e===1/0)return"?";let t=T.SecondsInColonTime(e);return"00:00:00".substr(0,8-t.length)+t},IsoDuration:$};let S={i:"i",em:"em",b:"b",bold:"strong",u:"u",lang:"i"};const M=/<(\w+)(\.[^>]+)?( [^>]+)?>/gi,A=/<\/(\w+)( [^>]*)?>/gi,I=/\n/gi;function z(e){return!(e in S)}function N(e,t,a,i){if(z(t=t.toLowerCase()))return"";let n="";return"lang"===t&&(n=` lang="${i.trim()}"`),`<${S[t]}${n}>`}function q(e,t){return z(t=t.toLowerCase())?"":`</${S[t]}>`}function O(e){return e.split("<").length!==e.split(">").length?h(e):e.replace(M,N).replace(A,q).replace(I,"<br/>")}function D(e){let t=e.target;if(null!==document.CPU.current_audiotag_playing||R(t))return;let a=Number(window.localStorage.getItem(t.currentSrc));a>0&&!K._last_play_error&&(document.CPU.seekElementAt(t,a),K.play(void 0,t))}HTMLAudioElement.prototype.CPU_connected=!1;let H=0;function R(e){return null===e||e.duration===1/0||void 0!==e.dataset.streamed}function B(e){e.addEventListener("loadedmetadata",D,o),e.addEventListener("play",K.play_once,o),e.addEventListener("ended",K.ended,o),e.addEventListener("ready",D,o),e.addEventListener("canplay",D,o),["ready","load","loadeddata","canplay","abort","error","emptied","play","playing","pause","ended","durationchange","loadedmetadata","timeupdate","waiting"].forEach((t=>{e.addEventListener(t,K.update,o)})),s()||["pause","ended"].forEach((t=>{e.addEventListener(t,K.pause,o)})),""===e.getAttribute("preload")&&(e.preload="metadata",e.load())}HTMLAudioElement.prototype.CPU_controller=function(){return this.closest(e)},HTMLAudioElement.prototype.CPU_update=function(){let e=this.CPU_controller();if(e){let t=e.CPU;t&&t.update&&t.update()}null!==document.CPU.global_controller&&document.CPU.global_controller.update()};const j="_playlist";let F=null;function W(e,t){K._last_play_error=!1,document.CPU.autoplay&&K.play(e,t)}const K={_timecode_start:0,_timecode_end:!1,_last_play_error:!1,hash_order:async function(e,t){let a=!0;"string"!=typeof e&&(a="at_start"in e,e=location.hash.substr(1));let i="",n="",o=e.split("&"),r=!1;for(let e of o)if(e.includes("=")||""!==i){let[t,a]=e.split("=");switch(t){case"t":n=a||"0",r=!0;break;case"autoplay":r="1"===a;break;case"auto_play":r="true"===a}}else i=e;if(""===n||a&&!r)return void t?.();let[l,s]=n.split(",");K._timecode_start=L(l),K._timecode_end=void 0!==s&&L(s),!1!==K._timecode_end&&(K._timecode_end=K._timecode_end>K._timecode_start&&K._timecode_end),await document.CPU.jumpIdAt(i,l,t);let d=document.CPU.global_controller;d&&function(e){if(!e.is_controller)return;let t=e.current_playlist;if(e.current_playlist=document.CPU.find_current_playlist(),e.get_plane(j)||e.add_plane(j,w.playlist,{track:!1,panel:"nocuetime",highlight:!0,_comp:!0}),t!==e.current_playlist){if(e.clear_plane(j),0===e.current_playlist.length)return void e.remove_plane(j);for(let t of e.current_playlist)e.add_point(j,0,t,{text:document.getElementById(t)?.dataset.title,link:`#${t}&t=0`})}e.highlight_point(j,e.audiotag.id,oe),e.element.shadowRoot.querySelector("main").insertAdjacentElement("afterend",e.get_plane_panel(j))}(d)},hover:function({target:e,offsetX:t}){let a=g(e),i=t/e.clientWidth*a.audiotag.duration;a.show_throbber_at(i)},out:function({target:e}){g(e).hide_throbber()},throbble:function(e){let t=0,{target:a,offsetX:i}=e,n=document.CPU,o=g(a).audiotag;if(o.duration!==1/0){if(n.current_audiotag_playing&&!n.is_audiotag_playing(o)&&K.pause(void 0,n.current_audiotag_playing),isNaN(o.duration)&&!R(o)){let e=o.CPU_controller();e&&e.update_loading&&e.update_loading(void 0,100*i/a.clientWidth);let t="loadedmetadata";return o.addEventListener(t,(()=>{K.throbble({offsetX:i,target:a})}),r),void o.setAttribute("preload","metadata")}if(void 0!==e.at)t=e.at;else{t=e.offsetX/a.clientWidth*o.duration}n.seekElementAt(o,t),K.play(e)}else K.play(e)},pause:function(e,t){if(!t){let{target:a}=e;t="AUDIO"===a.tagName?a:g(a).audiotag}t.pause(),document.CPU.current_audiotag_playing=null,window.localStorage.removeItem(t.currentSrc)},play_once:function({target:e}){let t=document.CPU;document.CPU.last_used=e,t.only_play_one_audiotag&&t.current_audiotag_playing&&!t.is_audiotag_playing(e)&&K.pause(void 0,t.current_audiotag_playing),t.current_audiotag_playing=e},play:function(e,t){if(!e&&K._last_play_error)return void m("play() prevented because already waiting for focus");var a;t=t??g(e.target).audiotag,K._last_play_error=!1,((a=t.currentTime)<K._timecode_start||!1!==K._timecode_end&&a>K._timecode_end)&&(K._timecode_start=0,K._timecode_end=!1);let i=t.play();i&&i.then((()=>{document.CPU.had_played=!0})).catch((e=>{K._last_play_error=!0;let a=W.bind(this,t);switch(e.name){case"NotAllowedError":if(m("Auto-play prevented : Browser requires a manual interaction first."),document.addEventListener("focus",a,r),document.addEventListener("click",a,r),t.CPU_connected){let e=t.CPU_controller().CPU;e.glow_before_play=!0,e.set_act_container("glow")}break;case"NotSupportedError":e("The browser refuses the audio source, probably due to audio format.")}})),function(e){let t=document.CPU.global_controller;t&&(e.isEqualNode(t.audiotag)||(t.attach_audiotag_to_controller(e),t.audiotag=e,t.show_main(),t.redraw_all_planes(),t.set_mode_container()),t.build_playlist())}(t)},key:function(e,t=1){if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let a=g(e.target),i=a.audiotag;function n(t){e.at=a.audiotag.currentTime+t,a.show_throbber_at(e.at),K.throbble(e),a.hide_throbber_later()}switch(e.keyCode){case 27:K.restart(e),K.pause(void 0,i);break;case 32:i.paused?K.play(e,i):K.pause(void 0,i);break;case 35:document.CPU.seekElementAt(i,i.duration);break;case 36:K.restart(e);break;case 37:n(-document.CPU.keymove*t);break;case 39:n(+document.CPU.keymove*t);break;default:return}e.preventDefault()},keydownplay:function(e){if(13===e.keyCode)return;let t=g(e.target).audiotag;t.paused?K.play(void 0,t):K.pause(void 0,t),e.preventDefault()},restart:function({target:e}){let t=g(e);document.CPU.seekElementAt(t.audiotag,0)},reward:function(e){e.keyCode=37,K.key(e)},foward:function(e){e.keyCode=39,K.key(e)},fastreward:function(e){e.keyCode=37,K.key(e,document.CPU.fast_factor)},fastfoward:function(e){e.keyCode=39,K.key(e,document.CPU.fast_factor)},cuechange:function(e,t){let a=document.body.classList;a.remove(F),F=`cpu_playing_tag_«${t.id}»_cue_«${e.id}»`,a.add(F)},update:function({target:e}){!1!==K._timecode_end&&e.currentTime>K._timecode_end&&K.pause(void 0,e),e.CPU_update(),e.paused||R(e)||window.localStorage.setItem(e.currentSrc,String(e.currentTime))},ended:function({target:e},t){t=t??e;let{dataset:a,id:i}=t;if(!a.playlist)return;let n=a.playlist,o=document.CPU.playlists[n];if(void 0===o)return void m(`Named playlist ${n} not created. WTF ?`);let r=o.indexOf(i);if(r<0)return void m(`Audiotag ${i} not in playlist ${n}. WTF ?`);if(r+1===o.length)return;let l=o[r+1],s=document.getElementById(l);s?(document.CPU.seekElementAt(s,0),K.play({},s)):m(`Audiotag #${l} doesn't exists. WTF ?`)}};let Z=null;const V=["fastreward","reward","foward","fastfoward"];class X{press(e){let t=e.target.id?e.target:e.target.closest("button");t.id&&V.includes(t.id)&&(K[t.id](e),Z&&window.clearTimeout(Z),Z=window.setTimeout(X.repeat,document.CPU.repeat_delay,{target:t}),e.preventDefault())}repeat(e){K[e.target.id](e),Z=window.setTimeout(X.repeat,document.CPU.repeat_factor,e)}release(e){window.clearTimeout(Z),Z=null,e.preventDefault()}}let Y=null;class G{start({target:e}){let t=g(e);Y=setTimeout(t.show_handheld_nav.bind(t),document.CPU.alternate_delay)}cancel(){clearTimeout(Y)}}const J="_chapters";async function Q(e){if(e.is_controller)return;let t=e.audiotag,a=!1;if(t&&t.textTracks?.length>0){let i=null;for(let e of t.textTracks)"chapters"!==e.kind.toLowerCase()||!e.cues||i&&e.language.toLowerCase()!==b||(i=e);if(i?.cues.length>0){e.add_plane(J,w.chapters,{track:"chapters"});let t=ee.bind(void 0,e);i.removeEventListener("cuechange",t),i.addEventListener("cuechange",t,o);for(let t of i.cues)if(!e.get_point(J,t.id)){let a=Math.floor(t.startTime);e.add_point(J,a,t.id,{text:O(t.text),link:!0,end:t.endTime})}i.cues.length>0&&(a=!0),ee(e,{target:{activeCues:i.cues}})}}let i=`cpu_tag_«${t.id}»_chaptered`,n=document.body.classList;a?n.add(i):(e.remove_plane(J),n.remove(i))}function ee(e,t){let a;try{let i=e.audiotag.currentTime;for(let e of t.target.activeCues)e.startTime<=i&&i<e.endTime&&(a=e);if(Object.is(a,e._activecue))return;e._activecue=a}catch(e){f(e)}e.remove_highlights_points(J,oe),a&&(K.cuechange(a,e.audiotag),e.fire_event("chapter_changed",{cue:a}),e.highlight_point(J,a.id,oe))}function te(e){let{title:t,canonical:a}=g(e.target).fetch_audiotag_dataset();navigator.share({title:t,text:t,url:a}),e.preventDefault()}function ae(e){let t=e.shadowId("interface").classList;e.shadowId("poster").addEventListener("load",(()=>{t.add("poster-loaded")}),o);let a=e.show_main.bind(e),i={pause:K.play,play:K.pause,time:K.throbble,actions:e.show_actions.bind(e),back:a,poster:a,restart:K.restart};for(let t in i)e.shadowId(t).addEventListener("click",i[t],o);let n=["fastreward","reward","foward","fastfoward"],s={touchstart:!0,touchend:!1,touchcancel:!1,mousedown:!0,mouseup:!1,mouseleave:!1};for(let t of n){const a=e.shadowId(t);for(let e in s)a.addEventListener(e,s[e]?X.press:X.release)}e.element.addEventListener("keydown",K.key),e.shadowId("control").addEventListener("keydown",K.keydownplay);let d=e.shadowId("time"),c={mouseover:!0,mousemove:!0,mouseout:!1,touchstart:!0,touchend:!1,touchcancel:!1};for(let e in c)d.addEventListener(e,c[e]?K.hover:K.out,o);d.addEventListener("touchstart",G.start,o),d.addEventListener("touchend",G.cancel,o),d.addEventListener("contextmenu",e.show_handheld_nav.bind(e)),navigator.share&&(t.add("hasnativeshare"),e.shadowId("nativeshare").addEventListener("click",te,o)),e.audiotag&&(e.audiotag.addEventListener("durationchange",e.reposition_tracks.bind(e),o),e.show_main(),function(e){Q(e);let t=e.audiotag,a=Q.bind(void 0,e);t.addEventListener("loadedmetadata",a,r);let i=t.querySelector('track[kind="chapters"]');i&&!i._CPU_load_ev&&(i._CPU_load_ev=i.addEventListener("load",a,o))}(e),e.fire_event("ready"),l("#canonical",p,e.shadowRoot))}const ie=["poster","actions","timeline","chapters","panels","panels-title","panels-except-play"],ne="with-preview",oe="active-cue",re=/^[a-zA-Z0-9\-_]+$/,le=/^[a-zA-Z0-9\-_]+_«([a-zA-Z0-9\-_]+)(»_.*_«([a-zA-Z0-9\-_]+))?»$/;function se(e){const[,t,,a]=e.match(le)||[];return[t??"",a??""]}function de({target:e}){if(e.id||(e=e.closest("[id]")),!e)return;let[t,a]=se(e.id);g(e).highlight_point(t,a)}function ce(e,t,a){return`${a?"panel":"track"}_«${e}»_point_«${t}»`}function ue(e){return void 0!==e&&!1!==e}function pe({classList:e},t){t?e.remove("no"):e.add("no")}class he{constructor(e,a,i){this.element=e,this.audiotag=e._audiotag,this.container=a,this.mode_when_play=null,this.glow_before_play=!!i.glow,this.glow_before_play=i.glow,this.current_playlist=[],this._activecue=null,this.mode_was=null,this.act_was=null,this.audiotag&&!this.audiotag._CPU_planes&&(this.audiotag._CPU_planes={}),this.is_controller=this.element.tagName===t,this._planes={},this.audiotag||(document.CPU.global_controller=this,this.audiotag=document.querySelector(n)),ae(this),this.attach_audiotag_to_controller(this.audiotag);let o=i.mode;if(o){let[e,t]=o.split(",");t&&(o=this.audiotag.paused?e:t,this.mode_when_play=t)}this.set_mode_container(o),i.hide&&this.set_hide_container(i.hide.split(" "))}mirrored_in_controller(){let e=document.CPU.global_controller;return e&&this.audiotag.isEqualNode(e.audiotag)}translate_vtt(e){return O(e)}get_point_names_from_id(e){return se(e)}async fire_event(e,t){this.element.dispatchEvent(new CustomEvent(`CPU_${e}`,{target:this.element,bubbles:!0,cancelable:!1,composed:!1,detail:t}))}shadowId(e){return this.element.shadowRoot.getElementById(e)}set_mode_container(e=null){if(e=e??"default",this.mode_was===e)return;let t=this.container.classList;t.remove(`mode-${this.mode_was}`),t.add(`mode-${e}`),this.mode_was=e}set_act_container(e){if(this.act_was===e)return;if(!document.CPU.had_played&&null!==this.act_was&&"loading"===e)return;let t=this.container.classList;t.remove("act-loading","act-buffer","act-pause","act-play","act-glow"),t.add(`act-${e}`),"play"===this.act_was&&"loading"===e&&t.add("act-buffer"),this.act_was=e}set_hide_container(e){let t=this.container.classList;for(let e of ie)t.remove(`hide-${e}`);for(let a of e)a=a.toLowerCase(),ie.includes(a)&&t.add(`hide-${a}`)}update_playbutton(){let e=this.audiotag,t=e.getAttribute("preload"),a=!t||"none"!==t.toLowerCase();if(e.readyState<HTMLMediaElement.HAVE_CURRENT_DATA&&(a||e._CPU_played))return void this.set_act_container("loading");let i="play";e.paused&&(i="pause",!e._CPU_played&&this.glow_before_play&&(i="glow")),this.set_act_container(i);let n="last-used",o=this.container.classList;e.paused?this.audiotag.isEqualNode(document.CPU.last_used)||o.remove(n):(e._CPU_played=!0,o.add(n),this.mode_when_play&&(this.set_mode_container(this.mode_when_play),this.mode_when_play=null))}update_line(e,t){let{duration:a}=this.audiotag;t=t??(0===a?0:100*e/a),this.shadowId("loadingline").style.width=`${t}%`}update_time(){let e=this.audiotag,t=R(e)?0:Math.floor(e.currentTime),a=e.dataset.canonical??"",i=a.indexOf("#"),n=this.shadowId("elapse");n.href=`${d(a)}#${i<0?e.id:a.substr(i+1)}&t=${t}`;let o=!1,r=Math.round(e.duration);if(isNaN(r)){let t=Math.round(e.dataset.duration);t>0&&(o=U(t))}else o=U(r);n.querySelector("span").innerText=U(e.currentTime);let l=n.querySelector(".nosmaller");l.innerText=o?` / ${o}`:"…",pe(l,o),this.update_line(e.currentTime)}update_time_borders(){let e=this.audiotag,t="_borders",a="play";if(document.CPU.is_audiotag_global(e)&&!1!==K._timecode_end){if(this.get_plane(t)){let e=this.get_point(t,a);if(e&&e.start===K._timecode_start&&e.end===K._timecode_end)return}this.add_plane(t,"",{track:"borders",panel:!1,highlight:!1}),this.add_point(t,K._timecode_start,a,{link:!1,end:K._timecode_end})}else this.remove_plane(t)}update_loading(e,t){this.update_line(e,t),this.set_act_container("loading")}update_error(){let e=this.audiotag;if(!e)return!0;let t=e.error;if(t){let e,a=this.shadowId("pageerror");switch(this.show_interface("error"),t.code){case MediaError.MEDIA_ERR_ABORTED:e=w.media_err_aborted;break;case MediaError.MEDIA_ERR_NETWORK:e=w.media_err_network;break;case MediaError.MEDIA_ERR_DECODE:e=w.media_err_decode;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:e=w.media_err_src_not_supported;break;default:e=w.media_err_unknow}return a.innerText=e,!0}return!1}update(){this.update_error()||(this.update_playbutton(),this.update_time(),this.update_time_borders())}position_time_element(e,t,a){let{duration:i}=this.audiotag;0===i||isNaN(i)||(ue(t)&&(e.style.left=t/i*100+"%"),ue(a)&&(e.style.right=100*(1-a/i)+"%"))}async show_throbber_at(e){let t=this.audiotag;if(t.duration<1)return;isNaN(t.duration)&&!R(t)&&t.setAttribute("preload","metadata");let a=this.shadowId("popup");a.style.opacity=1,this.position_time_element(a,e),a.innerHTML=U(e),a.dateTime=P(e).toUpperCase()}hide_throbber(){this.shadowId("popup").style.opacity=0}hide_throbber_later(){let e=this.shadowId("popup");e._hider&&window.clearTimeout(e._hider),e._hider=window.setTimeout(this.hide_throbber.bind(this),1e3)}fetch_audiotag_dataset(){return{...y,...this.audiotag.dataset}}update_links(){let e=this,t=this.audiotag,a=this.fetch_audiotag_dataset(),i=d(a.canonical??""),n=0===t.currentTime?"":`&t=${Math.floor(t.currentTime)}`,o=i===d(window.location.href)?t.id:"",r=encodeURIComponent(`${i}#${o}${n}`),l="";"@"===a.twitter?.[0]&&(l=`&via=${a.twitter.substring(1)}`);let s=t.querySelector("source[data-downloadable]")?.src||a.download||t.currentSrc,c=a.title,u={twitter:`https://twitter.com/share?text=${c}&url=${r}${l}`,facebook:`https://www.facebook.com/sharer.php?t=${c}&u=${r}`,email:`mailto:?subject=${c}&body=${r}`,link:s};for(let t in u)e.shadowId(t).href=u[t]}show_interface(e){let t=this.container.classList;t.remove("show-no","show-main","show-share","show-error","media-streamed"),R(this.audiotag)&&t.add("media-streamed"),t.add(`show-${e}`)}show_actions(){this.show_interface("share"),this.update_links()}show_main(){this.show_interface("main")}show_handheld_nav(e){R(this.audiotag)||(this.container.classList.toggle("show-handheld-nav"),e?.preventDefault())}inject_css(e,t){if(!e.match(re))return void f(`inject_css invalid key "${e}"`);this.remove_css(e);let a=document.createElement("style");a.id=`style_${e}`,a.innerHTML=t,this.container.appendChild(a)}remove_css(e){this.shadowId(`style_${e}`)?.remove()}complete_template(){let e=this.fetch_audiotag_dataset(),{title:t,waveform:a}=e,i=this.shadowId("canonical");i.href=e.canonical;let n=i.classList;t?n.remove("untitled"):(n.add("untitled"),t=w.untitled),i.innerText=t,this.element.title!==t&&(this.element.title=t),this.shadowId("poster").src=e.poster||"",this.shadowId("time").style.backgroundImage=a?`url(${a})`:""}attach_audiotag_to_controller(e){e&&(this.audiotag=e,function(e){e.id=e.id||"CPU-Audio-tag-"+H++}(e),this.complete_template(),K.update({target:e}))}get_plane(e){return this._planes[e]??this.audiotag._CPU_planes[e]}get_plane_track(e){return this.shadowId(`track_«${e}»`)}get_plane_panel(e){return this.shadowId(`panel_«${e}»`)}get_plane_nav(e){return this.get_plane_panel(e)?.querySelector("ul")}draw_plane(e){this.get_plane_track(e)?.remove(),this.get_plane_panel(e)?.remove();let t=this.get_plane(e);if(!t)return;let{track:a,panel:i,title:n}=t,r=this.remove_highlights_points.bind(this,e,ne,!0);function l(e){e.addEventListener("mouseover",de,o),e.addEventListener("focusin",de,o),e.addEventListener("mouseleave",r,o),e.addEventListener("focusout",r,o)}if(!1!==a){let t=document.createElement("aside");t.id=`track_«${e}»`,!0!==a&&t.classList.add(a.split(" ")),this.shadowId("line").appendChild(t),l(t)}if(!1!==i){let t=document.createElement("div");t.id=`panel_«${e}»`,!0!==i&&t.classList.add(i.split(" ")),t.classList.add("panel"),t.innerHTML=`<h6>${h(n)}</h6><nav><ul></ul></nav>`,this.container.appendChild(t),pe(t.querySelector("h6"),n),l(t)}!this.is_controller&&this.mirrored_in_controller()&&document.CPU.global_controller.draw_plane(e)}add_plane(e,t,a={}){if(!e.match(re)||this.get_plane(e))return!1;if((a={track:!0,panel:!0,title:"",highlight:!0,points:{},_comp:!1,...a,title:t})._comp)this._planes[e]=a;else{if(this.is_controller)return!1;this.audiotag._CPU_planes=this.audiotag._CPU_planes??{},this.audiotag._CPU_planes[e]=a}return this.draw_plane(e),!0}remove_plane(e){return!(this.is_controller||!e.match(re)||!this.get_plane(e))&&(delete(this._planes[e]?this._planes:this.audiotag._CPU_planes)[e],this.get_plane_track(e)?.remove(),this.get_plane_panel(e)?.remove(),!this.is_controller&&this.mirrored_in_controller()&&document.CPU.global_controller.draw_plane(e),!0)}plane_points(e){return this.get_plane(e).points}get_point(e,t){return this.get_plane(e).points[t]}get_point_track(e,t){return this.shadowId(ce(e,t,!1))}get_point_panel(e,t){return this.shadowId(ce(e,t,!0))}plane_resort(e){let t=Object.fromEntries(Object.entries(this.plane_points(e)).sort((([,e],[,t])=>e.start-t.start)));this.get_plane(e).points=t}plane_pointsnames(e){return Object.keys(this.plane_points(e))}panel_reorder(e){if(this.plane_resort(e),!this.get_plane_panel(e))return;let t,a;for(let i of this.plane_pointsnames(e))a=this.get_point_panel(e,i),t?.insertAdjacentElement("afterend",a),t=a}draw_point(e,t){let a=this.audiotag?this.audiotag:document.CPU.global_controller.audiotag,i=this.get_point(e,t),{start:n,link:o,text:r,image:l,end:s}=i,d="#";!0===o&&(d=`#${a.id}&t=${n}`),"string"==typeof o&&(d=o);let c,u=this.get_plane_track(e);if(u){c=this.get_point_track(e,t),c||(c=document.createElement("a"),c.id=ce(e,t,!1),c.tabIndex=-1,c.innerHTML='<img alt="" /><span></span>',u.appendChild(c)),c.href=d,c.title=r;let a=c.querySelector("img");pe(a,l),a.src=l||"",c.querySelector("img").innerHTML=r,this.position_time_element(c,n,s)}let p,h=this.get_plane_nav(e);if(h){p=this.get_point_panel(e,t),p||(p=document.createElement("li"),p.id=ce(e,t,!0),p.innerHTML='<a href="#" class="cue"><strong></strong><time></time></a>',h.appendChild(p)),p.querySelector("a").href=d,p.querySelector("strong").innerHTML=r;let a=p.querySelector("time");a.dateTime=$(n),a.innerText=U(n)}this.fire_event("draw_point",{plane:e,point:t,data_point:i,element_point_track:c,element_point_panel:p}),!this.is_controller&&this.mirrored_in_controller()&&document.CPU.global_controller.draw_point(e,t)}add_point(e,t,a,i={}){if(!this.get_plane(e)||this.get_point(e,a)||t<0||!a.match(re))return!1;if(!this._planes[e]&&this.is_controller)return!1;i.start=Number(t);let{start:n}=i;return this.get_plane(e).points[a]=i,this.fire_event("add_point",{plane:e,point:a,data_point:i}),this.get_plane(e)._st_max>n?this.panel_reorder(e):(this.draw_point(e,a),this.get_plane(e)._st_max=n),!0}edit_point(e,t,a){let i=this.get_plane(e);if(!i)return!1;let n=this.get_point(e,t);if(!n)return!1;let{start:o}=a;o=Number(o);let r=null!=o&&o!==n.start;a={...n,...a},i.points[t]=a,this.draw_point(e,t),r&&this.panel_reorder(e),this.fire_event("edit_point",{plane:e,point:t,data_point:a}),i._st_max<o&&(i._st_max=o)}remove_point(e,t){let a=this.get_plane(e);if(!a||!this.get_point(e,t))return!1;this.fire_event("remove_point",{plane:e,point:t}),this.get_point_track(e,t)?.remove(),this.get_point_panel(e,t)?.remove();let i=0;for(let t of Object.values(this.plane_points(e))){let e=Number(t.start);i=i<e?e:i}return a._st_max=i,!this.is_controller&&this.mirrored_in_controller()&&document.CPU.global_controller.remove_point(e,t),a.points[t]&&delete a.points[t],!0}clear_plane(e){let t=this.get_plane(e);if(!t)return!1;for(let a of Object.keys(t.points))this.remove_point(e,a);let a=this.get_plane_nav(e);return a&&(a.innerHTML=""),t._st_max=0,!0}refresh_plane(e){this.plane_resort(e);for(let t of this.plane_pointsnames(e))this.draw_point(e,t)}redraw_all_planes(){l("aside, div.panel",(e=>{e.remove()}),this.container);for(let e of Object.keys({...this._planes,...this.audiotag._CPU_planes}))this.draw_plane(e),this.refresh_plane(e)}reposition_tracks(){let e=this.audiotag.duration;if(0!==e&&!isNaN(e))for(let e in this.audiotag._CPU_planes){if(this.get_plane(e).track)for(let t of this.plane_pointsnames(e)){let a=this.get_point_track(e,t),{start:i,end:n}=this.get_point(e,t);this.position_time_element(a,i,n)}}}remove_highlights_points(e,t="with-preview",a=!0){if(l(`#track_«${e}» .${t}, #panel_«${e}» .${t}`,(e=>{e.classList.remove(t)}),this.container),a&&this.mirrored_in_controller()){let a,i=document.CPU.global_controller;a=this.is_controller?g(i.audiotag):i,a.remove_highlights_points(e,t,!1)}}highlight_point(e,t,a="with-preview",i=!0){if(this.remove_highlights_points(e,a,i),this.get_plane(e)?.highlight&&(this.get_point_track(e,t)?.classList.add(a),this.get_point_panel(e,t)?.classList.add(a),i&&this.mirrored_in_controller())){let i,n=document.CPU;i=this.is_controller?g(n.global_controller.audiotag):n.global_controller,i.highlight_point(e,t,a,!1)}}}class _e extends HTMLElement{constructor(){if(super(),this.CPU=null,c())return void this.remove();if(this.tagName===e&&!this.querySelector(i))return m(`Tag <${e}> without <audio controls>.\nSee https://github.com/dascritch/cpu-audio/blob/master/INSTALL.md for a correct installation.`),void this.remove();let t=document.querySelector("template#CPU__template");this.attachShadow({mode:"open"}).innerHTML=t.innerHTML}connectedCallback(){c()||(this.CPU=new he(this,this.shadowRoot.querySelector(a),{glow:this.hasAttribute("glow"),mode:this.hasAttribute("mode")?this.getAttribute("mode"):null,hide:!!this.hasAttribute("hide")&&this.getAttribute("hide")}))}disconnectedCallback(){}}function ge([{target:t}]){const a=g(t);let i="audio";if(!a.element.querySelector(i))return n="<audio> element was removed.",window.console.info(`${e}: `,n),void a.element.remove();var n;a.element.copy_attributes_to_media_dataset()}function me([{target:e}]){const t=g(e);Q(t),t.complete_template();const a=document.CPU.global_controller;t.audiotag.isEqualNode(a?.audiotag)&&(Q(a),a.complete_template())}class fe extends _e{constructor(){super(),this._audiotag=null,this.audiotag=null,this.observer_cpuaudio=null,this.observer_audio=null}copy_attributes_to_media_dataset(){for(let e in document.CPU.default_dataset){let t=this.getAttribute(e);null!==t&&(this._audiotag.dataset[e]="duration"!==e?t:L(t))}}connectedCallback(){this._audiotag=this.querySelector(i),this._audiotag&&(this.copy_attributes_to_media_dataset(),super.connectedCallback(),function(e){if(!e.CPU_connected&&(e.CPU_connected=!0,B(e),e.hidden=!0,e.removeAttribute("controls"),"string"==typeof e.dataset.playlist)){let t=e.dataset.playlist;t in document.CPU.playlists||(document.CPU.playlists[t]=[]),document.CPU.playlists[t].push(e.id)}}(this.CPU.audiotag),this.observer_cpuaudio=new MutationObserver(ge),this.observer_cpuaudio.observe(this,{childList:!0,attributes:!0}),this.observer_audio=new MutationObserver(me),this.observer_audio.observe(this,{childList:!0,attributes:!0,subtree:!0}))}}const ve={autoplay:!1,keymove:5,only_play_one_audiotag:!0,alternate_delay:500,fast_factor:4,repeat_delay:400,repeat_factor:100,advance_in_playlist:!0,current_audiotag_playing:null,global_controller:null,had_played:!1,last_used:null,playlists:{},convert:T,trigger:K,default_dataset:y,find_interface:_,find_container:g,is_audiotag_playing:function(e){let t=document.CPU.current_audiotag_playing;return t&&e.isEqualNode(t)},is_audiotag_global:function(e){return this.global_controller?e.isEqualNode(this.global_controller.audiotag):this.is_audiotag_playing(e)},jumpIdAt:async function(e,t,a){function i({target:e}){let a=L(t);document.CPU.seekElementAt(e,a);let i={target:e};e.readyState>=e.HAVE_FUTURE_DATA?o(i):e.addEventListener("canplay",o,r),K.update(i)}function o(e){let t=e.target;K.play(void 0,t),a?.()}let l=""!==e?document.getElementById(e):document.querySelector(n);if(null==l||void 0===l.currentTime)return void m(`Unknow audiotag ${e}`);let s={target:l};l.readyState<HTMLMediaElement.HAVE_CURRENT_DATA?(l.addEventListener("loadedmetadata",i,r),l.load(),K.update(s)):i(s)},seekElementAt:function(e,t){if(isNaN(t)||R(e))return;if(void 0!==e.fastSeek)e.fastSeek(t);else try{e.currentTime=t}catch(a){e.src=`${e.currentSrc.split("#")[0]}#t=${t}`}e.CPU_controller()?.update_loading?.(t)},find_current_playlist:function(){let e=this.global_controller?.audiotag;if(!e)return[];for(let t of this.playlists)if(t.includes(e.id))return t;return[]}};async function be(){!function(){let e=document.createElement("style");e.innerHTML='audio[controls]{display:block;width:100%}:root{--cpu-height:64px;--cpu-font-family:Lato,"Open Sans","Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;--cpu-font-size:15px;--cpu-font-small-size:calc(var(--cpu-font-size) * 0.8);--cpu-background:#555;--cpu-color:#ddd;--cpu-playing-background:#444;--cpu-playing-color:#fff;--cpu-error-background:#a00;--cpu-error-color:#ff7;--cpu-popup-background:#aaa;--cpu-popup-color:#333;--cpu-cue:#000;--cpu-timeline-limits:#f00;--cpu-elapse-width:160px;--cpu-min-padding:16px;--cpu-inner-shadow:inset 0px 5px 10px -5px black;--cpu-color-transitions:0s;--cpu-background-transitions:0s;--cpu-unfold:0s}@media (max-width:640px){.interface,:root{--cpu-font-size:13px;--cpu-height:48px;--cpu-elapse-width:140px;--cpu-min-padding:4px}@media (max-width:480px){.interface,:root{--cpu-elapse-width:70px}}}',document.head.appendChild(e);let t=document.createElement("template");t.id="CPU__template",t.innerHTML=`<style>:host{all:initial;display:block;contain:content}.act-buffer,.act-play{--cpu-background:var(--cpu-playing-background);--cpu-color:var(--cpu-playing-color)}.show-error{--cpu-background:var(--cpu-error-background);--cpu-color:var(--cpu-error-color)}#interface{--cpu-timeline-height:10px;background:var(--cpu-background);color:var(--cpu-color)}#interface,*{font-family:var(--cpu-font-family);font-size:var(--cpu-font-size);font-weight:400;font-style:normal;line-height:1.2;border:none;padding:0;margin:0;text-indent:0;list-style-type:none;user-select:none;transition:color var(--cpu-color-transitions),background-color var(--cpu-background-transitions),opacity var(--cpu-background-transitions)}.show-no main{visibility:hidden}main{display:flex;overflow:hidden;height:var(--cpu-height)}a,button{color:currentColor;border:none;text-decoration:none}button{background:0 0}svg{fill:currentColor;width:var(--cpu-height);height:var(--cpu-height)}em,i{font-style:italic}b,h5 a,strong{font-weight:700}[src='']{visibility:hidden}#pageerror{padding:0 4px;align-self:center}#actions,#control{flex:0 0 var(--cpu-height);width:var(--cpu-height);max-height:var(--cpu-height);height:100%;text-align:center;vertical-align:middle}a{cursor:pointer}#handheld-nav,#loading,#pause,#play,.show-error #pagemain,.show-error #pageshare,.show-error #poster,.show-handheld-nav #titleline,.show-main #pageerror,.show-main #pageshare,.show-share #pageerror,.show-share #pagemain{display:none}.act-glow #pause,.act-loading #loading,.act-pause #pause,.act-play #play{display:block}.act-glow #pause{animation:glow 2s infinite}@keyframes glow{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}.show-main #pagemain,.show-share #pageshare{flex:1 1 100%;display:flex;align-items:center}.act-loading #loading circle{fill:#777;opacity:1;animation:pulse 2s infinite}#loading circle:nth-child(2){animation-delay:.5s}#loading circle:nth-child(3){animation-delay:1s}@keyframes pulse{50%{opacity:0}}#poster{max-width:var(--cpu-height);min-width:var(--cpu-height);max-height:var(--cpu-height);min-height:var(--cpu-height);object-fit:contain;opacity:0}.poster-loaded #poster{opacity:1}.hide-poster #poster{display:none}#actions svg,#control svg{vertical-align:middle;max-width:100%;max-height:100%}#titleline{display:flex;align-items:center}#about,#title{flex:1 1 auto;position:relative}#title{overflow:hidden;text-overflow:'…'}#title a{display:block;max-height:calc(6px + calc(2 * var(--cpu-font-size)))}#canonical.untitled{font-style:italic}#elapse{flex:0 1 var(--cpu-elapse-width);text-align:right}.mode-compact #elapse{flex:0 0 calc(var(--cpu-elapse-width) + 32px);text-align:center}#time{background-color:#000;background-repeat:no-repeat;background-size:100% 100%;width:100%;height:var(--cpu-timeline-height);display:block;position:relative;cursor:none}#loadingline{background:currentColor;height:var(--cpu-timeline-height);display:block;position:absolute;left:0;pointer-events:none}#loadingline:after{content:'';position:absolute;right:0;width:0;height:var(--cpu-timeline-height);display:block;outline:var(--cpu-color) 4px solid;z-index:127;opacity:0}main:focus #loadingline:after,main:hover #loadingline:after{opacity:1}aside{position:absolute;width:100%}aside a{position:absolute;display:block}aside a span{display:none}aside.chapters{height:2px}aside.chapters a{background:var(--cpu-cue);height:2px;border:1px solid var(--cpu-background)}aside.chapters a.active-cue{background:var(--cpu-color)}aside.borders{pointer-events:none;height:var(--cpu-timeline-height);z-index:4;top:calc(var(--cpu-timeline-height) + 6px)}aside.borders a{height:var(--cpu-timeline-height);background:0 0}aside.borders a:after,aside.borders a:before{pointer-events:none;content:"";position:absolute;width:2px;height:var(--cpu-timeline-height);border:2px solid var(--cpu-timeline-limits)}aside.borders a:before{border-right-width:0;left:0}aside.borders a:after{border-left-width:0;left:100%}aside.ticker{height:16px;top:30px}aside.ticker a.active-cue{left:0!important;right:0!important;background:inherit!important;color:inherit!important}aside.ticker a.active-cue span{display:inline-block}.act-loading #loadingline #loadingline{background:repeating-linear-gradient(45deg,var(--cpu-color) 0,var(--cpu-background) 15px,var(--cpu-color) 30px);background-size:200% 200%;animation:loadingline 1s linear infinite}@keyframes loadingline{0%{background-position-y:var(--cpu-timeline-height)}}#handheld-nav{max-height:calc(6px + calc(2 * var(--cpu-font-size)));padding-bottom:8px}.show-handheld-nav #handheld-nav{display:flex}#handheld-nav *{flex:1 0 auto;height:calc(2 * var(--cpu-font-size))}.hide-actions #actions{visibility:hidden;pointer-events:none;min-width:var(--cpu-min-padding);max-width:var(--cpu-min-padding)}#pageshare{text-align:center}#pageshare a{display:flex;align-items:center;justify-content:center;height:var(--cpu-height)}#pageshare a,#pageshare div{flex:1 0;color:#fff;text-decoration:none;overflow:hidden;text-overflow:clip}#pageshare svg{vertical-align:middle;width:32px;height:32px}#pageshare #nativeshare{display:none}.hasnativeshare #pageshare #nativeshare{display:flex}.hasnativeshare #pageshare .nonativeshare{display:none}#twitter{background:#4db5f4}#facebook,#nativeshare{background:#5974cc}#email{background:#c00}#link{background:#77f}#popup{pointer-events:none;position:absolute;transform:translate(-25px,-19px);z-index:127;min-width:50px;font-size:11px;text-align:center;padding:2px;border-radius:4px;box-shadow:#000 2px 2px;background:var(--cpu-popup-background);color:var(--cpu-popup-color);opacity:0}#popup:before{pointer-events:none;content:"";position:absolute;z-index:127;left:20px;bottom:-8px;width:0;height:0;border-top:8px solid var(--cpu-popup-background);border-left:4px solid transparent;border-right:4px solid transparent}.panel{display:flex;list-style:none;flex-direction:column;padding:0 var(--cpu-min-padding);box-shadow:var(--cpu-inner-shadow)}h6{text-align:center}.cue{border-top:1px solid #000;display:flex;margin:0;padding:2px}.cue strong{flex:1 1;font-weight:400}.cue time{flex:0 0 var(--cpu-elapse-width) 0px;text-align:right}.nocuetime time{display:none}.cue time,aside a,aside.ticker *,h6{font-size:var(--cpu-font-small-size)}.mode-compact{width:calc(var(--cpu-elapse-width) + var(--cpu-height) * 2 + 32px)}.mode-button{width:var(--cpu-height)}.mode-button #about,.mode-button #actions,.mode-button #poster,.mode-button .panel,.mode-button aside,.mode-compact #actions,.mode-compact #line,.mode-compact #title,.mode-compact .panel,.mode-compact aside{width:0;display:none}.hide-chapters .chapters,.hide-panels .panel,.hide-panels-except-play .panel,.hide-panels-title h6,.hide-timeline #line,.media-streamed #line,.media-streamed #link,.mode-hidden{display:none}.hide-panels-except-play.last-used .panel{display:flex}.mode-compact.show-main #pagemain{flex:0 0 auto}@media (max-width:640px){.nosmall{display:none!important}#elapse{max-height:16px}#interface{--cpu-timeline-height:8px}#handheld-nav{padding-bottom:4px}aside.ticker{top:22px}}@media (max-width:480px){.nosmaller{display:none!important}.mode-default #elapse{flex:0 1 var(--cpu-elapse-width)}.mode-default #pagemain{padding-bottom:16px}#titleline{height:32px}#line{position:absolute;left:calc(0px - var(--cpu-height));right:calc(0px - var(--cpu-height));height:16px;top:32px}aside a{pointer-events:none}aside.borders{top:-2px}aside.chapters{top:8px}#handheld-nav{padding-bottom:2px}}@media (max-width:320px){.mode-default #elapse,.nosmallest{display:none!important}}@media print{#interface{display:none}}#pageshare div:hover,.active-cue,.with-preview,a:focus,a:hover,button:focus,button:hover{background:var(--cpu-focus-background,var(--cpu-color))!important;color:var(--cpu-focus-color,var(--cpu-background))!important}</style><div id="interface"class="show-no"tabindex="0"><main><img id="poster"class="nosmall"src=""alt=""loading="lazy"decoding="async"><section id="pageerror"role="alert"></section><section id="pagemain"><button type="button"id="control"tabindex="0"><svg id="loading"aria-label="${w.loading}"viewBox="0 0 32 32"aria-hidden="true"><title>${w.loading}</title><circle cx="6"cy="22"r="4"/><circle cx="16"cy="22"r="4"/><circle cx="26"cy="22"r="4"/></svg> <svg id="play"aria-label="${w.pause}"viewBox="0 0 32 32"aria-hidden="true"><title>${w.pause}</title><path d="M 6,6 12.667,6 12.667,26 6,26 z"/><path d="M 19.333,6 26,6 26,26 19.333,26 z"/></svg> <svg id="pause"aria-label="${w.play}"viewBox="0 0 32 32"aria-hidden="true"><title>${w.play}</title><path d="M 6,6 6,26 26,16 z"/></svg></button><div id="about"><div id="titleline"><h5 id="title"><a href="#"id="canonical"aria-label="${w.canonical}"></a></h5><a id="elapse"aria-label="${w.moment}"tabindex="-1"><span>…</span><span class="nosmaller"></span></a></div><div id="handheld-nav"><button type="button"id="restart"><svg viewBox="0 0 24 16"aria-hidden="true"><polygon points="4,0 8,0 8,16 4,16"/><path d="M 16,0 8,8 16,16 z"/><path d="M 24,0 16,8 24,16 z"/></svg></button> <button type="button"id="fastreward"><svg viewBox="0 0 24 16"aria-hidden="true"><path d="M 8,0 0,8 8,16 z"/><path d="M 16,0 8,8 16,16 z"/><path d="M 24,0 16,8 24,16 z"/></svg></button> <button type="button"id="reward"class="nosmallest"><svg viewBox="0 0 24 16"aria-hidden="true"><path d="M 12,0 4,8 12,16 z"/><path d="M 20,0 12,8 20,16 z"/></svg></button> <button type="button"id="foward"><svg viewBox="0 0 24 16"aria-hidden="true"><path d="M 4,0 12,8 4,16 z"/><path d="M 12,0 20,8 12,16 z"/></svg></button> <button type="button"id="fastfoward"><svg viewBox="0 0 24 16"aria-hidden="true"><path d="M 0,0 8,8 0,16 z"/><path d="M 8,0 16,8 8,16 z"/><path d="M 16,0 24,8 16,16 z"/></svg></button></div><div id="line"><div id="time"><div id="loadingline"role="progressbar"></div><time id="popup">--:--</time></div></div></div><button id="actions"aria-label="${w.more}"title="${w.more}"><svg viewBox="0 0 32 32"aria-hidden="true"><circle cx="7"cy="16"r="3"/><circle cx="16"cy="16"r="3"/><circle cx="25"cy="16"r="3"/></svg></button></section><section id="pageshare"><a href="#"target="social"id="nativeshare"aria-label="${w.share}"title="${w.share}"><svg viewBox="0 0 32 32"aria-hidden="true"><path d="M 21 0 C 18.2 0 16 2.2 16 5 C 16 5.1 16 5.2 16.0 5.2 L 8.2 9.2 C 7.3 8.4 6.2 8 5 8 C 2.2 8 0 10.2 0 13 C 0 15.8 2.2 18 5 18 C 6.2 18 7.3 17.5 8.2 16.8 L 16 20.8 C 16.0 20.8 16 20.9 16 21 C 16 23.8 18.2 26 21 26 C 23.8 26 26 23.8 26 21 C 26 18.2 23.8 16 21 16 C 19.8 16 18.7 16.4 17.8 17.2 L 10 13.3 C 10 13.2 10 13.1 10 13 C 10 12.9 10 12.8 10 12.8 L 17.8 8.8 C 18.7 9.6 19.8 10 21 10 C 23.8 10 26 7.8 26 5 C 26 2.2 23.8 0 21 0 Z"></path></svg> <span class="nosmall">${w.share}</span> </a><a href="#"target="social"id="twitter"class="nonativeshare"aria-label="${w.twitter}"title="${w.twitter}"><svg viewBox="0 0 32 32"aria-hidden="true"><path d="M 25.9,9.9 C 25.2,10.2 24.4,10.4 23.6,10.5 24.5,10 25.1,9.2 25.4,8.2 24.6,8.8 23.8,9.1 22.9,9.3 22.1,8.5 21.1,8 19.9,8 c -2.2,0 -4,1.8 -4,4 0,0 0,0.6 0.1,0.9 -3.3,-0.2 -6.3,-1.8 -8.3,-4.2 -0.3,0.6 -0.5,1.3 -0.5,2 0,1.4 0.7,2.6 1.8,3.4 -0.7,0 -1.3,-0.2 -1.8,-0.5 0,0 0,0 0,0.1 0,2 1.4,3.6 3.2,4 -0.3,0.1 -0.7,0.1 -1.1,0.1 -0.3,0 -0.5,0 -0.8,-0.1 0.5,1.6 2,2.8 3.7,2.8 -1.4,1.1 -3.1,1.7 -5,1.7 -0.3,0 -0.6,0 -1,-0.1 1.8,1.1 3.9,1.8 6.1,1.8 7.4,0 11.4,-6.1 11.4,-11.4 0,-0.2 0,-0.3 0,-0.5 0.8,-0.6 1.4,-1.3 2,-2.1 z"/></svg> <span class="nosmall">${w.twitter}</span> </a><a href="#"target="social"id="facebook"class="nonativeshare"aria-label="${w.facebook}"title="${w.facebook}"><svg viewBox="0 0 32 32"aria-hidden="true"><path d="m 21.1,16 -3.7,0 0,10 -4.3,0 0,-10 -2.1,0 0,-3.3 2.1,0 0,-2.1 c 0,-2.9 1.2,-4.6 4.7,-4.6 l 3.9,0 0,3.5 -3.2,0 c -1,0 -1.1,0.5 -1.1,1.4 l -0,1.8 4.3,0 -0.6,3.3 0,0 z"/></svg> <span class="nosmall">${w.facebook}</span> </a><a href="#"target="social"id="email"class="nonativeshare"aria-label="${w.e_mail}"title="${w.e_mail}"><svg viewBox="0 0 32 32"aria-hidden="true"><path d="m 8,9 15.9,0 c 0.3,0 0.6,0.1 0.8,0.2 l -8.8,9 -8.8,-9 c 0.3,-0.1 0.5,-0.2 0.8,-0.2 z m -2,12.3 0,-10.5 c 0,0 0,-0.1 0,-0.1 l 5.8,6 -5.8,5.1 c 0,-0.1 -0.1,-0.3 -0.1,-0.4 z m 17.9,1.8 -15.9,0 c -0.2,0 -0.3,0 -0.5,-0.1 l 5.7,-5 2.8,2.9 2.8,-2.9 5.7,5 c -0.2,0 -0.3,0.1 -0.5,0.1 z m 2,-1.8 c 0,0.2 0,0.3 -0.1,0.5 l -5.8,-5.1 5.8,-6 c 0,0 0,0.1 0,0.1 z"/></svg> <span class="nosmall">${w.e_mail}</span> </a><a href="#"target="social"download=""id="link"aria-label="${w.download}"title="${w.download}"><svg viewBox="0 0 32 32"aria-hidden="true"><path d="M 6,6 26,6 16,26 z"/><rect x="6"y="22"width="20"height="4"/></svg> <span class="nosmall">${w.download}</span> </a><a id="back"aria-label="${w.back}"title="${w.back}"><svg viewBox="0 0 32 32"aria-hidden="true"><path d="M 9,8 24,23 23,24 8,9 z"/><path d="M 9,24 24,9 23,8 8,23 z"/></svg> <span class="nosmall">${w.back}</span></a></section></main></div>`,document.head.appendChild(t)}(),s()?(window.customElements.define(e.toLowerCase(),fe),window.customElements.define(t.toLowerCase(),_e),document.body.classList.add("cpu-audio-with-webcomponents")):(m("WebComponent may NOT behave correctly on this browser. Only timecode hash links are activated.\nSee https://github.com/dascritch/cpu-audio/ for details"),l(i,B),document.body.classList.add("cpu-audio-without-webcomponents")),window.addEventListener("hashchange",K.hash_order,o),K.hash_order({at_start:!0})}document.CPU||window.customElements.get(e.toLowerCase())?m("cpu-audio is called twice"):(HTMLDocument.prototype.CPU=ve,null!==document.body?be():document.addEventListener("DOMContentLoaded",be,o))})();
//# sourceMappingURL=cpu-audio.js.map